<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- navbar -->
    <link rel="stylesheet" type="text/css" href="/css/navbar.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>Subcontractor Dashboard</title>
</head>
<body>
    <div class="navbar">
        <ul>
          <li><a href="https://youtu.be/3zDkMfjyfaU?si=2nBjVTSEArqtvWm2">{{defaults.sysName}}</a></li>
          {{#isAdmin}} <li><a href="/admin">admin</a></li> {{/isAdmin}}
          <div style="float:right">
            <!-- log out -->
           <li>  <a href="/logout">Log Out</a></li>
            <!-- profile -->
             <li><a href="/subcontractor/profile">Profile</a></li>
          </div>
        </ul>
      </div>
    <br>
    <br>

    <!-- add some padding for the nav bar -->
    <div style="padding-bottom: 50px;">
        <br>
    </div>

    <div class="container mt-4">
        <div class="form-list">
            <h2 class="mb-4">Completed Forms</h2>
            <div class="list-group">
                {{#forms}}
                <div class="list-group-item d-flex justify-content-between align-items-center">
                    <span>{{form_name}} - <small>Submitted on {{created_at}}</small></span>
                    <button class="btn btn-primary btn-sm" style="background-color: rgba(8, 148, 161, 1.0); border-color: rgba(8, 148, 161, 1.0);" onclick="viewForm('{{form_id}}')">View</button>
                </div>
                {{/forms}}
                {{^forms}}
                <div class="list-group
                <div class="list-group-item">
                    <span>No forms submitted yet.</span>    
                </div>  
                <p class="text-muted">Create a new form to get started.</p>

                {{/forms}}
            </div>
        </div>
        <div class="mt-4">
        </div>
        <button class="btn btn-success mt-4" onclick="createNewForm()">Create New</button>
    </br>
    <!-- horizontal line -->
    <hr>
    </div>

    <script>
        function viewForm(formId) {
            // use query parameters ?id=formId and direct to  /subcontractor/viewForm
            // to view the form
            let url = `/subcontractor/viewForm?id=${formId}`;
            window.location = url;
        }

        function createNewForm() {
            // Implement form creation logic here
            let url = `/subcontractor/createForm`;
            window.location = url;
        }


        // if the user preferrs dark mode...
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark-mode');
            // dark gray
          
            // set the background color to dark gray
            $('body').css('background-color', '#313131');

            $('body').css('color', '#ffffff');
            $('body').css('font-family', 'Arial, sans-serif');
            $('body').css('font-size', '16px');
            $('body').css('line-height', '1.5');

            // restyle table
            $('table').css('background-color', '#424242');
            $('table').css('color', '#ffffff');

        }
    </script>
</body>
</html>
